---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: ""
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}} ({{.Type}})

{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}

## Example Usage

### Basic Apache CloudStack Cluster

```terraform
data "spectrocloud_cloudaccount_apache_cloudstack" "account" {
  name = "apache-cloudstack-account-1"
}

data "spectrocloud_cluster_profile" "profile" {
  name = "cloudstack-k8s-profile"
}

resource "spectrocloud_cluster_apache_cloudstack" "cluster" {
  name             = "apache-cloudstack-cluster-1"
  tags             = ["dev", "cloudstack", "department:engineering"]
  cloud_account_id = data.spectrocloud_cloudaccount_apache_cloudstack.account.id

  cloud_config {
    ssh_key_name = "my-ssh-key"
    
    zone {
      name = "Zone1"
      
      network {
        id   = "network-id"  # or use name instead
        name = "DefaultNetwork"
      }
    }
  }

  cluster_profile {
    id = data.spectrocloud_cluster_profile.profile.id
  }

  # Control Plane Pool
  machine_pool {
    control_plane           = true
    control_plane_as_worker = true
    name                    = "cp-pool"
    count                   = 1
    offering                = "Medium Instance"  # CloudStack compute offering

    network {
      network_name = "DefaultNetwork"
    }

    additional_labels = {
      "role" = "control-plane"
    }
  }

  # Worker Pool
  machine_pool {
    name     = "worker-pool"
    count    = 2
    offering = "Large Instance"  # CloudStack compute offering

    network {
      network_name = "DefaultNetwork"
    }

    additional_labels = {
      "role" = "worker"
    }
  }
}
```

### Apache CloudStack Cluster with Advanced Configuration

```terraform
data "spectrocloud_cloudaccount_apache_cloudstack" "account" {
  name = "apache-cloudstack-account-1"
}

data "spectrocloud_cluster_profile" "profile" {
  name = "cloudstack-k8s-profile"
}

data "spectrocloud_backup_storage_location" "bsl" {
  name = "s3-backup-location"
}

resource "spectrocloud_cluster_apache_cloudstack" "advanced_cluster" {
  name             = "apache-cloudstack-production"
  tags             = ["prod", "cloudstack", "department:platform"]
  cloud_account_id = data.spectrocloud_cloudaccount_apache_cloudstack.account.id

  # Update all worker pools simultaneously for faster updates
  update_worker_pools_in_parallel = true

  cloud_config {
    ssh_key_name = "production-ssh-key"
    
    zone {
      name = "Zone1"
      
      network {
        id   = "network-id"
        name = "ProductionNetwork"
      }
    }
  }

  cluster_profile {
    id = data.spectrocloud_cluster_profile.profile.id

    # Override cluster profile variables
    variables = {
      "cluster_size" = "large"
      "environment"  = "production"
    }
  }

  # Backup Policy
  backup_policy {
    schedule                  = "0 2 * * *"  # Daily at 2 AM
    backup_location_id        = data.spectrocloud_backup_storage_location.bsl.id
    prefix                    = "cloudstack-prod-backup"
    expiry_in_hour            = 7200  # 300 days
    include_disks             = true
    include_cluster_resources = true
  }

  # Scan Policy
  scan_policy {
    configuration_scan_schedule = "0 0 * * SUN"
    penetration_scan_schedule   = "0 0 * * SUN"
    conformance_scan_schedule   = "0 0 1 * *"
  }

  # Control Plane Pool with Custom Instance Configuration
  machine_pool {
    control_plane           = true
    control_plane_as_worker = true
    name                    = "cp-pool"
    count                   = 3

    placement {
      zone         = "Zone1"
      compute      = "Medium Instance"
      network_name = "ProductionNetwork"
    }

    # Custom instance configuration
    instance_config {
      disk_gib   = 100
      memory_mib = 8192
      num_cpus   = 4
    }

    additional_labels = {
      "role"        = "control-plane"
      "environment" = "production"
    }

    taints {
      key    = "master"
      value  = "true"
      effect = "NoSchedule"
    }
  }

  # Worker Pool with Autoscaling
  machine_pool {
    name = "worker-pool-autoscale"
    count = 3
    min  = 2
    max  = 10

    placement {
      zone         = "Zone1"
      compute      = "Large Instance"
      network_name = "ProductionNetwork"
    }

    instance_config {
      disk_gib   = 200
      memory_mib = 16384
      num_cpus   = 8
    }

    additional_labels = {
      "role"        = "worker"
      "scalable"    = "true"
      "environment" = "production"
    }
  }

  timeouts {
    create = "45m"
    update = "45m"
    delete = "30m"
  }
}
```

### Apache CloudStack Cluster with Static IP Pool

```terraform
data "spectrocloud_cloudaccount_apache_cloudstack" "account" {
  name = "apache-cloudstack-account-1"
}

data "spectrocloud_cluster_profile" "profile" {
  name = "cloudstack-k8s-profile"
}

resource "spectrocloud_cluster_apache_cloudstack" "cluster_static_ip" {
  name             = "apache-cloudstack-static-ip"
  tags             = ["prod", "static-ip"]
  cloud_account_id = data.spectrocloud_cloudaccount_apache_cloudstack.account.id

  cloud_config {
    ssh_key_name = "prod-ssh-key"
    
    zone {
      name = "Zone1"
      
      network {
        id   = "network-id"
        name = "StaticIPNetwork"
      }
    }
  }

  cluster_profile {
    id = data.spectrocloud_cluster_profile.profile.id
  }

  machine_pool {
    control_plane           = true
    control_plane_as_worker = true
    name                    = "cp-pool"
    count                   = 1

    placement {
      zone              = "Zone1"
      compute           = "Medium Instance"
      network_name      = "StaticIPNetwork"
      static_ip_pool_id = "static-ip-pool-uuid"
    }
  }

  machine_pool {
    name  = "worker-pool"
    count = 2

    placement {
      zone              = "Zone1"
      compute           = "Large Instance"
      network_name      = "StaticIPNetwork"
      static_ip_pool_id = "static-ip-pool-uuid"
    }
  }
}
```

### Apache CloudStack Cluster with Template Override

```terraform
data "spectrocloud_cloudaccount_apache_cloudstack" "account" {
  name = "apache-cloudstack-account-1"
}

data "spectrocloud_cluster_profile" "profile" {
  name = "cloudstack-k8s-profile"
}

resource "spectrocloud_cluster_apache_cloudstack" "cluster_custom_template" {
  name             = "apache-cloudstack-custom-template"
  tags             = ["dev", "custom-os"]
  cloud_account_id = data.spectrocloud_cloudaccount_apache_cloudstack.account.id

  cloud_config {
    ssh_key_name = "dev-ssh-key"
    
    zone {
      name = "Zone1"
      
      network {
        id   = "network-id"
        name = "DefaultNetwork"
      }
    }
  }

  cluster_profile {
    id = data.spectrocloud_cluster_profile.profile.id
  }

  machine_pool {
    control_plane           = true
    control_plane_as_worker = true
    name                    = "cp-pool"
    count                   = 1

    placement {
      zone         = "Zone1"
      compute      = "Medium Instance"
      network_name = "DefaultNetwork"
    }

    # Override CloudStack template for this machine pool
    template {
      name = "ubuntu-22.04-custom-template"
    }
  }

  machine_pool {
    name  = "worker-pool"
    count = 2

    placement {
      zone         = "Zone1"
      compute      = "Large Instance"
      network_name = "DefaultNetwork"
    }

    # Different template for worker nodes
    template {
      name = "ubuntu-22.04-gpu-template"
    }

    instance_config {
      disk_gib   = 500
      memory_mib = 32768
      num_cpus   = 16
    }
  }
}
```

{{ .SchemaMarkdown | trimspace }}

