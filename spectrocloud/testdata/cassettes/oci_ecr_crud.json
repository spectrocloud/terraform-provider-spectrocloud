{
    "name": "registry_oci_ecr_crud_unit",
    "interactions": [
      {
        "request": {
          "method": "POST",
          "url": "https://api.spectrocloud.com/v1/registries/oci/ecr/validate",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"credentials\":{\"credentialType\":\"sts\",\"sts\":{\"arn\":\"arn:aws:iam::123456789012:role/ecr-vcr-role\",\"externalId\":\"vcr-external-id\"}},\"endpoint\":\"123456789012.dkr.ecr.us-west-1.amazonaws.com\",\"isPrivate\":true,\"providerType\":\"helm\",\"isSyncSupported\":false,\"baseContentPath\":\"\",\"tls\":{\"certificate\":\"\",\"enabled\":true,\"insecureSkipVerify\":false}}"
        },
        "response": {
          "status_code": 204,
          "status": "204 No Content",
          "headers": {},
          "body": ""
        }
      },
      {
        "request": {
          "method": "POST",
          "url": "https://api.spectrocloud.com/v1/registries/oci/ecr",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"metadata\":{\"name\":\"test-vcr-ecr-registry\"},\"spec\":{\"credentials\":{\"credentialType\":\"sts\",\"sts\":{\"arn\":\"arn:aws:iam::123456789012:role/ecr-vcr-role\",\"externalId\":\"vcr-external-id\"}},\"endpoint\":\"123456789012.dkr.ecr.us-west-1.amazonaws.com\",\"isPrivate\":true,\"providerType\":\"helm\",\"isSyncSupported\":false,\"baseContentPath\":\"\",\"tls\":{\"certificate\":\"\",\"enabled\":true,\"insecureSkipVerify\":false}}}"
        },
        "response": {
          "status_code": 201,
          "status": "201 Created",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"uid\":\"vcr-ecr-registry-uid-001\"}"
        }
      },
      {
        "request": {
          "method": "GET",
          "url": "https://api.spectrocloud.com/v1/registries/oci/vcr-ecr-registry-uid-001/ecr",
          "headers": {
            "Content-Type": "application/json"
          }
        },
        "response": {
          "status_code": 200,
          "status": "200 OK",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"metadata\":{\"name\":\"test-vcr-ecr-registry\",\"uid\":\"vcr-ecr-registry-uid-001\",\"labels\":{},\"annotations\":{}},\"spec\":{\"baseContentPath\":\"\",\"endpoint\":\"123456789012.dkr.ecr.us-west-1.amazonaws.com\",\"isPrivate\":true,\"providerType\":\"helm\",\"isSyncSupported\":false,\"credentials\":{\"credentialType\":\"sts\",\"sts\":{\"arn\":\"arn:aws:iam::123456789012:role/ecr-vcr-role\",\"externalId\":\"vcr-external-id\"}},\"tls\":{\"certificate\":\"\",\"enabled\":true,\"insecureSkipVerify\":false}},\"status\":{\"syncStatus\":{\"isSyncSupported\":false}}}"
        }
      },
      {
        "request": {
          "method": "PUT",
          "url": "https://api.spectrocloud.com/v1/registries/oci/vcr-ecr-registry-uid-001/ecr",
          "headers": {
            "Content-Type": "application/json"
          },
          "body": "{\"metadata\":{\"name\":\"test-vcr-ecr-registry\",\"uid\":\"vcr-ecr-registry-uid-001\",\"labels\":{\"env\":\"test\"},\"annotations\":{}},\"spec\":{\"baseContentPath\":\"\",\"endpoint\":\"123456789012.dkr.ecr.us-west-1.amazonaws.com\",\"isPrivate\":true,\"providerType\":\"helm\",\"isSyncSupported\":false,\"credentials\":{\"credentialType\":\"sts\",\"sts\":{\"arn\":\"arn:aws:iam::123456789012:role/ecr-vcr-role\",\"externalId\":\"vcr-external-id\"}},\"tls\":{\"certificate\":\"\",\"enabled\":true,\"insecureSkipVerify\":false}}}"
        },
        "response": {
          "status_code": 204,
          "status": "204 No Content",
          "headers": {},
          "body": ""
        }
      },
      {
        "request": {
          "method": "DELETE",
          "url": "https://api.spectrocloud.com/v1/registries/oci/vcr-ecr-registry-uid-001/ecr",
          "headers": {
            "Content-Type": "application/json"
          }
        },
        "response": {
          "status_code": 204,
          "status": "204 No Content",
          "headers": {},
          "body": ""
        }
      }
    ]
  }